# import the matplotlib.pyplot package
import matplotlib.pyplot as plt
import sys


filename = "graph.png"
print("Bar graph of vulnerabilities")
print("USAGE: python3 script.py <# Critical> <# High> <# Medium> <# Low> <# Info>")
try:

    #vulns = sys.argv[1]
    f = open("summary.md", "r")
    message = f.read()
    critical = int(message.count('Critical |'))
    high = int(message.count('High |'))
    medium = int(message.count('Medium |'))
    low = int(message.count('Low |'))
    informative = int(message.count('Informative |'))
    
    # Created two lists for x-axis and y-axis
    Severities = ['Critical', 'High', 'Medium', 'Low', 'Informative']
    Numbers = [critical, high, medium, low, informative]
    colors = ['purple', 'red', 'orange', 'blue', 'green']
    # pass both lists into the bar() method and here we change the width
    # size value from 0.8 (default) to 0.5
    plt.bar(Severities, Numbers, width=0.5, color=colors)
    # set the title name
    plt.title('Vulnerabilities by Severity', fontweight='bold')
    # set the xlable name
    plt.xlabel('Severity', fontweight='bold')
    # set the ylabel name
    plt.ylabel('Number of Vulnerabilities', fontweight='bold')

    # draw the graph
    #plt.show()
    # save graph
    plt.savefig("screenshots/"+filename)
    print("Graph is saved successfully ", filename)
    
except Exception as e:
    print(e)
    print("Failed to create the graph")



